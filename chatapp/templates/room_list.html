{% extends 'base.html' %}
{% load bootstrap5 %}

{% block content %}
    <div style="text-align: center; max-width: 500px; margin: 10rem auto;">
        <div class="card">
          <div class="card-body">
            <ul class="list-unstyled mb-0">
            {% for room in rooms %}
              <li class="p-2 border-bottom" style="cursor: pointer" onclick="redirectToContent('{{ room.room_id }}')">
                  <div class="d-flex flex-row">
                    <div class="pt-1">
                        <p class="fw-bold mb-0">{{room.user1.username}}</p>
                        <p class="small text-muted">{{room.last_message}}</p>
                    </div>
                </div>
              </li>
            {% endfor %}
            </ul>
          </div>
        </div>
    </div>

<script>
    function redirectToContent(roomID) {
        // 리다이렉션할 URL 생성
        var targetURL = "/chat/" + roomID;

        // 페이지 리다이렉션
        window.location.href = targetURL;
    }
</script>
{% endblock %}